<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Admin Interface - 8 Bit Music Theory Weeklies</title>
	<link rel="stylesheet" href="/static/style.css" type="text/css" media="all">
	<link rel="stylesheet" href="/static/admin.css" type="text/css" media="all">
	<script src="[VUE-URL]"></script>
</head>
<body>
	<h1>
		<img src="/static/banner.png" alt="8BIT MUSIC THEORY WEEKLIES" />
	</h1>
	<div id="content">
		<div class="submit-babble">
			<p>Welcome to the super-ugly administration interface!</p>
			<p>On the left is a preview of what the interface will look like to the public, once we roll out the next week.</p>
			<p>On the right are submission forms you can use to edit or delete existing submissions, from the current week as well as the next.</p>
			<p>The submissions are also labeled "(valid)" or "(invalid!)". To be valid, an entry must be adequately filled out, with mp3 and pdf uploaded. An entry will only be displayed in the voting interface if it is valid.</p>
			<p>If you need help, or if something seems amiss, message @wilm0x42, and he'll ii V us back to I.</p>
		</div>
		<div class="admin-controls">
			[ADMIN-CONTROLS]
		</div>
		
		<iframe src="/admin/preview/[ADMIN-KEY]" class="entries-preview"></iframe>
		
		<div class="entry-list">
			[ENTRY-LIST]
		</div>
		
		<div class="vote-list">
		    <div v-for="vote in votes" class="vote-data">
		    	<a :href="'/admin/viewvote/[ADMIN-KEY]/' + vote.userID.toString()">
		    		Vote from {{ vote.userName }}
		    	</a>
		    </div>
		</div>
	</div>

	<script>
	    function foldForm(form)
	    {
	        var params = form.getElementsByClassName("admin-entry-param");
	        var breaks = form.getElementsByTagName("br");

	        var setTo = !params[0].hidden;

	        for (var i = 0; i < params.length; i++)
	        {
	            // We skip the second parameter, as it indentifies
	            // the entry by the entrant's name.
	            if (i == 1)
	                continue
	            params[i].hidden = setTo;
	        }

	        for (var i = 0; i < breaks.length; i++)
	        {
	            breaks[i].hidden = setTo;
	        }
	    }

	    adminForms = document.getElementsByClassName("admin-entry-form")

	    for (var i = 0; i < adminForms.length; i++)
	    {
	        foldForm(adminForms[i])
	    }
	</script>
	
	<script>
		var adminApp = new Vue({
			el: "#content",
			data: function()
			{
				voteData = [VOTE-DATA]
				
				var ret = {
					votes: voteData
				}
				
				return ret
			},
			methods: {
			}
		})
	</script>
</body>
</html>
